/*!
 SearchPanes 1.1.1
 2019-2020 SpryMedia Ltd - datatables.net/license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,e];for(var t=0;t<e.length;++t){var d=e[t];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new $jscomp.global.Proxy(e,{get:function(d,n,q){return d==e&&"q"==n&&q==t}}));return!0===t.q}catch(d){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,d){e!=Array.prototype&&e!=Object.prototype&&(e[t]=d.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(e,t){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function e(d){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+t++,d)}var t=0;return e}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.asyncIterator;e||(e=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};
$jscomp.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):$jscomp.arrayIterator(e)};$jscomp.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};$jscomp.polyfill=function(e,t,d,n){if(t){d=$jscomp.global;e=e.split(".");for(n=0;n<e.length-1;n++){var q=e[n];q in d||(d[q]={});d=d[q]}e=e[e.length-1];n=d[e];t=t(n);t!=n&&null!=t&&$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:t})}};
$jscomp.polyfill("WeakMap",function(e){function t(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),f=new e([[a,2],[b,3]]);if(2!=f.get(a)||3!=f.get(b))return!1;f.delete(a);f.set(b,4);return!f.has(a)&&4==f.get(b)}catch(h){return!1}}function d(){}function n(a){var b=typeof a;return"object"===b&&null!==a||"function"===b}function q(a){if(!$jscomp.owns(a,v)){var b=new d;$jscomp.defineProperty(a,v,{value:b})}}function k(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof
d)return a;q(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&$jscomp.ES6_CONFORMANCE)return e}else if(t())return e;var v="$jscomp_hidden_"+Math.random();k("freeze");k("preventExtensions");k("seal");var w=0,c=function(a){this.id_=(w+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){if(!n(a))throw Error("Invalid WeakMap key");q(a);if(!$jscomp.owns(a,v))throw Error("WeakMap key fail: "+
a);a[v][this.id_]=b;return this};c.prototype.get=function(a){return n(a)&&$jscomp.owns(a,v)?a[v][this.id_]:void 0};c.prototype.has=function(a){return n(a)&&$jscomp.owns(a,v)&&$jscomp.owns(a[v],this.id_)};c.prototype.delete=function(a){return n(a)&&$jscomp.owns(a,v)&&$jscomp.owns(a[v],this.id_)?delete a[v][this.id_]:!1};return c},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(e){function t(){if($jscomp.ASSUME_NO_NATIVE_MAP||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),a=new e($jscomp.makeIterator([[c,"s"]]));if("s"!=a.get(c)||1!=a.size||a.get({x:4})||a.set({x:4},"t")!=a||2!=a.size)return!1;var b=a.entries(),f=b.next();if(f.done||f.value[0]!=c||"s"!=f.value[1])return!1;f=b.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!b.next().done?!1:!0}catch(h){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&$jscomp.ES6_CONFORMANCE)return e}else if(t())return e;$jscomp.initSymbolIterator();var d=new WeakMap,n=function(c){this.data_={};this.head_=v();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var a;!(a=c.next()).done;)a=a.value,this.set(a[0],a[1])}};n.prototype.set=function(c,a){c=0===c?0:c;var b=q(this,c);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=a:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,
value:a},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};n.prototype.delete=function(c){c=q(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};n.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=v();this.size=0};n.prototype.has=function(c){return!!q(this,c).entry};
n.prototype.get=function(c){return(c=q(this,c).entry)&&c.value};n.prototype.entries=function(){return k(this,function(c){return[c.key,c.value]})};n.prototype.keys=function(){return k(this,function(c){return c.key})};n.prototype.values=function(){return k(this,function(c){return c.value})};n.prototype.forEach=function(c,a){for(var b=this.entries(),f;!(f=b.next()).done;)f=f.value,c.call(a,f[1],f[0],this)};n.prototype[Symbol.iterator]=n.prototype.entries;var q=function(c,a){var b;var f=(b=a)&&typeof b;
"object"==f||"function"==f?d.has(b)?b=d.get(b):(f=""+ ++w,d.set(b,f),b=f):b="p_"+b;if((f=c.data_[b])&&$jscomp.owns(c.data_,b))for(c=0;c<f.length;c++){var h=f[c];if(a!==a&&h.key!==h.key||a===h.key)return{id:b,list:f,index:c,entry:h}}return{id:b,list:f,index:-1,entry:void 0}},k=function(c,a){var b=c.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=c.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:a(b)};b=null}return{done:!0,value:void 0}})},v=function(){var c=
{};return c.previous=c.next=c.head=c},w=0;return n},"es6","es3");$jscomp.findInternal=function(e,t,d){e instanceof String&&(e=String(e));for(var n=e.length,q=0;q<n;q++){var k=e[q];if(t.call(d,k,q,e))return{i:q,v:k}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(e,d){return $jscomp.findInternal(this,e,d).v}},"es6","es3");
$jscomp.iteratorFromArray=function(e,t){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var d=0,n={next:function(){if(d<e.length){var q=d++;return{value:t(q,e[q]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3");
$jscomp.polyfill("Array.prototype.findIndex",function(e){return e?e:function(e,d){return $jscomp.findInternal(this,e,d).i}},"es6","es3");
(function(){function e(c){d=c;n=c.fn.dataTable}function t(c){k=c;v=c.fn.dataTable}var d,n,q=function(){function c(a,b,f,h,l,r){var g=this;void 0===r&&(r=null);if(!n||!n.versionCheck||!n.versionCheck("1.10.0"))throw Error("SearchPane requires DataTables 1.10 or newer");if(!n.select)throw Error("SearchPane requires Select");a=new n.Api(a);this.classes=d.extend(!0,{},c.classes);this.c=d.extend(!0,{},c.defaults,b);this.customPaneSettings=r;this.s={cascadeRegen:!1,clearing:!1,colOpts:[],deselect:!1,displayed:!1,
dt:a,dtPane:void 0,filteringActive:!1,index:f,indexes:[],lastCascade:!1,lastSelect:!1,listSet:!1,name:void 0,redraw:!1,rowData:{arrayFilter:[],arrayOriginal:[],arrayTotals:[],bins:{},binsOriginal:{},binsTotal:{},filterMap:new Map,totalOptions:0},scrollTop:0,searchFunction:void 0,selectPresent:!1,serverSelect:[],serverSelecting:!1,showFiltered:!1,tableLength:null,updating:!1};b=a.columns().eq(0).toArray().length;this.colExists=this.s.index<b;this.c.layout=h;b=parseInt(h.split("-")[1],10);this.dom=
{buttonGroup:d("<div/>").addClass(this.classes.buttonGroup),clear:d('<button type="button">&#215;</button>').addClass(this.classes.dull).addClass(this.classes.paneButton).addClass(this.classes.clearButton),container:d("<div/>").addClass(this.classes.container).addClass(this.classes.layout+(10>b?h:h.split("-")[0]+"-9")),countButton:d('<button type="button"></button>').addClass(this.classes.paneButton).addClass(this.classes.countButton),dtP:d("<table><thead><tr><th>"+(this.colExists?d(a.column(this.colExists?
this.s.index:0).header()).text():this.customPaneSettings.header||"Custom Pane")+"</th><th/></tr></thead></table>"),lower:d("<div/>").addClass(this.classes.subRow2).addClass(this.classes.narrowButton),nameButton:d('<button type="button"></button>').addClass(this.classes.paneButton).addClass(this.classes.nameButton),panesContainer:l,searchBox:d("<input/>").addClass(this.classes.paneInputButton).addClass(this.classes.search),searchButton:d('<button type = "button" class="'+this.classes.searchIcon+'"></button>').addClass(this.classes.paneButton),
searchCont:d("<div/>").addClass(this.classes.searchCont),searchLabelCont:d("<div/>").addClass(this.classes.searchLabelCont),topRow:d("<div/>").addClass(this.classes.topRow),upper:d("<div/>").addClass(this.classes.subRow1).addClass(this.classes.narrowSearch)};this.s.displayed=!1;a=this.s.dt;this.selections=[];this.s.colOpts=this.colExists?this._getOptions():this._getBonusOptions();var x=this.s.colOpts;h=d('<button type="button">X</button>').addClass(this.classes.paneButton);d(h).text(a.i18n("searchPanes.clearPane",
"X"));this.dom.container.addClass(x.className);this.dom.container.addClass(null!==this.customPaneSettings&&void 0!==this.customPaneSettings.className?this.customPaneSettings.className:"");this.s.name=void 0!==this.s.colOpts.name?this.s.colOpts.name:null!==this.customPaneSettings&&void 0!==this.customPaneSettings.name?this.customPaneSettings.name:this.colExists?d(a.column(this.s.index).header()).text():this.customPaneSettings.header||"Custom Pane";d(l).append(this.dom.container);var e=a.table(0).node();
this.s.searchFunction=function(a,b,f,h){if(0===g.selections.length||a.nTable!==e)return!0;a="";g.colExists&&(a=b[g.s.index],"filter"!==x.orthogonal.filter&&(a=g.s.rowData.filterMap.get(f),a instanceof d.fn.dataTable.Api&&(a=a.toArray())));return g._search(a,f)};d.fn.dataTable.ext.search.push(this.s.searchFunction);if(this.c.clear)d(h).on("click",function(){g.dom.container.find(g.classes.search).each(function(){d(this).val("");d(this).trigger("input")});g.clearPane()});a.on("draw.dtsp",function(){g._adjustTopRow()});
a.on("buttons-action",function(){g._adjustTopRow()});d(window).on("resize.dtsp",n.util.throttle(function(){g._adjustTopRow()}));a.on("column-reorder.dtsp",function(a,b,f){g.s.index=f.mapping[g.s.index]});return this}c.prototype.clearData=function(){this.s.rowData={arrayFilter:[],arrayOriginal:[],arrayTotals:[],bins:{},binsOriginal:{},binsTotal:{},filterMap:new Map,totalOptions:0}};c.prototype.clearPane=function(){this.s.dtPane.rows({selected:!0}).deselect();this.updateTable();return this};c.prototype.destroy=
function(){d(this.s.dtPane).off(".dtsp");d(this.s.dt).off(".dtsp");d(this.dom.nameButton).off(".dtsp");d(this.dom.countButton).off(".dtsp");d(this.dom.clear).off(".dtsp");d(this.dom.searchButton).off(".dtsp");d(this.dom.container).remove();for(var a=d.fn.dataTable.ext.search.indexOf(this.s.searchFunction);-1!==a;)d.fn.dataTable.ext.search.splice(a,1),a=d.fn.dataTable.ext.search.indexOf(this.s.searchFunction);void 0!==this.s.dtPane&&this.s.dtPane.destroy();this.s.listSet=!1};c.prototype.getPaneCount=
function(){return void 0!==this.s.dtPane?this.s.dtPane.rows({selected:!0}).data().toArray().length:0};c.prototype.rebuildPane=function(a,b,f,h){void 0===a&&(a=!1);void 0===b&&(b=null);void 0===f&&(f=null);void 0===h&&(h=!1);this.clearData();var l=[];this.s.serverSelect=[];var c=null;void 0!==this.s.dtPane&&(h&&(this.s.dt.page.info().serverSide?this.s.serverSelect=this.s.dtPane.rows({selected:!0}).data().toArray():l=this.s.dtPane.rows({selected:!0}).data().toArray()),this.s.dtPane.clear().destroy(),
c=d(this.dom.container).prev(),this.destroy(),this.s.dtPane=void 0,d.fn.dataTable.ext.search.push(this.s.searchFunction));this.dom.container.removeClass(this.classes.hidden);this.s.displayed=!1;this._buildPane(this.s.dt.page.info().serverSide?this.s.serverSelect:l,a,b,f,c);return this};c.prototype.removePane=function(){this.s.displayed=!1;d(this.dom.container).hide()};c.prototype.setCascadeRegen=function(a){this.s.cascadeRegen=a};c.prototype.setClear=function(a){this.s.clearing=a};c.prototype.updatePane=
function(a){void 0===a&&(a=!1);this.s.updating=!0;this._updateCommon(a);this.s.updating=!1};c.prototype.updateTable=function(){this.selections=this.s.dtPane.rows({selected:!0}).data().toArray();this._searchExtras();(this.c.cascadePanes||this.c.viewTotal)&&this.updatePane()};c.prototype._setListeners=function(){var a=this,b=this.s.rowData,f;this.s.dtPane.on("select.dtsp",function(){a.s.dt.page.info().serverSide&&!a.s.updating?a.s.serverSelecting||(a.s.serverSelect=a.s.dtPane.rows({selected:!0}).data().toArray(),
a.s.scrollTop=d(a.s.dtPane.table().node()).parent()[0].scrollTop,a.s.selectPresent=!0,a.s.dt.draw(!1)):(clearTimeout(f),d(a.dom.clear).removeClass(a.classes.dull),a.s.selectPresent=!0,a.s.updating||a._makeSelection(),a.s.selectPresent=!1)});this.s.dtPane.on("deselect.dtsp",function(){f=setTimeout(function(){a.s.dt.page.info().serverSide&&!a.s.updating?a.s.serverSelecting||(a.s.serverSelect=a.s.dtPane.rows({selected:!0}).data().toArray(),a.s.deselect=!0,a.s.dt.draw(!1)):(a.s.deselect=!0,0===a.s.dtPane.rows({selected:!0}).data().toArray().length&&
d(a.dom.clear).addClass(a.classes.dull),a._makeSelection(),a.s.deselect=!1,a.s.dt.state.save())},50)});this.s.dt.on("stateSaveParams.dtsp",function(f,l,c){if(d.isEmptyObject(c))a.s.dtPane.state.clear();else{f=[];if(void 0!==a.s.dtPane){f=a.s.dtPane.rows({selected:!0}).data().map(function(a){return a.filter.toString()}).toArray();var h=d(a.dom.searchBox).val();var r=a.s.dtPane.order();var e=b.binsOriginal;var m=b.arrayOriginal}void 0===c.searchPanes&&(c.searchPanes={});void 0===c.searchPanes.panes&&
(c.searchPanes.panes=[]);c.searchPanes.panes.push({arrayFilter:m,bins:e,id:a.s.index,order:r,searchTerm:h,selected:f})}});this.s.dtPane.on("user-select.dtsp",function(a,b,f,g,c){c.stopPropagation()});this.s.dtPane.on("draw.dtsp",function(){a._adjustTopRow()});d(this.dom.nameButton).on("click.dtsp",function(){var b=a.s.dtPane.order()[0][1];a.s.dtPane.order([0,"asc"===b?"desc":"asc"]).draw();a.s.dt.state.save()});d(this.dom.countButton).on("click.dtsp",function(){var b=a.s.dtPane.order()[0][1];a.s.dtPane.order([1,
"asc"===b?"desc":"asc"]).draw();a.s.dt.state.save()});d(this.dom.clear).on("click.dtsp",function(){a.dom.container.find("."+a.classes.search).each(function(){d(this).val("");d(this).trigger("input")});a.clearPane()});d(this.dom.searchButton).on("click.dtsp",function(){d(a.dom.searchBox).focus()});d(this.dom.searchBox).on("input.dtsp",function(){a.s.dtPane.search(d(a.dom.searchBox).val()).draw();a.s.dt.state.save()});this.s.dt.state.save();return!0};c.prototype._addOption=function(a,b,f,h,l,c){if(Array.isArray(a)||
a instanceof n.Api)if(a instanceof n.Api&&(a=a.toArray(),b=b.toArray()),a.length===b.length)for(var g=0;g<a.length;g++)c[a[g]]?c[a[g]]++:(c[a[g]]=1,l.push({display:b[g],filter:a[g],sort:f[g],type:h[g]})),this.s.rowData.totalOptions++;else throw Error("display and filter not the same length");else"string"===typeof this.s.colOpts.orthogonal?(c[a]?c[a]++:(c[a]=1,l.push({display:b,filter:a,sort:f,type:h})),this.s.rowData.totalOptions++):l.push({display:b,filter:a,sort:f,type:h})};c.prototype._addRow=
function(a,b,f,h,c,d){for(var g,l=0,r=this.s.indexes;l<r.length;l++){var e=r[l];e.filter===b&&(g=e.index)}void 0===g&&(g=this.s.indexes.length,this.s.indexes.push({filter:b,index:g}));return this.s.dtPane.row.add({display:""!==a?a:this.c.emptyMessage,filter:b,index:g,shown:f,sort:""!==c?c:this.c.emptyMessage,total:h,type:d})};c.prototype._adjustTopRow=function(){var a=this.dom.container.find("."+this.classes.subRowsContainer),b=this.dom.container.find(".dtsp-subRow1"),f=this.dom.container.find(".dtsp-subRow2"),
h=this.dom.container.find("."+this.classes.topRow);(252>d(a[0]).width()||252>d(h[0]).width())&&0!==d(a[0]).width()?(d(a[0]).addClass(this.classes.narrow),d(b[0]).addClass(this.classes.narrowSub).removeClass(this.classes.narrowSearch),d(f[0]).addClass(this.classes.narrowSub).removeClass(this.classes.narrowButton)):(d(a[0]).removeClass(this.classes.narrow),d(b[0]).removeClass(this.classes.narrowSub).addClass(this.classes.narrowSearch),d(f[0]).removeClass(this.classes.narrowSub).addClass(this.classes.narrowButton))};
c.prototype._buildPane=function(a,b,f,h,c){var l=this;void 0===a&&(a=[]);void 0===b&&(b=!1);void 0===f&&(f=null);void 0===h&&(h=null);void 0===c&&(c=null);this.selections=[];var g=this.s.dt,e=g.column(this.colExists?this.s.index:0),u=this.s.colOpts,m=this.s.rowData,k=g.i18n("searchPanes.count","{total}"),t=g.i18n("searchPanes.countFiltered","{shown} ({total})"),q=g.state.loaded();this.s.listSet&&(q=g.state());if(this.colExists){var v=-1;if(q&&q.searchPanes&&q.searchPanes.panes)for(var p=0;p<q.searchPanes.panes.length;p++)if(q.searchPanes.panes[p].id===
this.s.index){v=p;break}if((!1===u.show||void 0!==u.show&&!0!==u.show)&&-1===v)return this.dom.container.addClass(this.classes.hidden),this.s.displayed=!1;if(!0===u.show||-1!==v)this.s.displayed=!0;if(!this.s.dt.page.info().serverSide){if(0===m.arrayFilter.length)if(this._populatePane(b),this.s.rowData.totalOptions=0,this._detailsPane(),q&&q.searchPanes&&q.searchPanes.panes)if(-1!==v)m.binsOriginal=q.searchPanes.panes[v].bins,m.arrayOriginal=q.searchPanes.panes[v].arrayFilter;else{this.dom.container.addClass(this.classes.hidden);
this.s.displayed=!1;return}else m.arrayOriginal=m.arrayTotals,m.binsOriginal=m.binsTotal;p=Object.keys(m.binsOriginal).length;f=this._uniqueRatio(p,g.rows()[0].length);if(!1===this.s.displayed&&((void 0===u.show&&null===u.threshold?f>this.c.threshold:f>u.threshold)||!0!==u.show&&1>=p)){this.dom.container.addClass(this.classes.hidden);this.s.displayed=!1;return}this.c.viewTotal&&0===m.arrayTotals.length?(this.s.rowData.totalOptions=0,this._detailsPane()):m.binsTotal=m.bins;this.dom.container.addClass(this.classes.show);
this.s.displayed=!0}else if(null!==f){if(void 0!==f.tableLength)this.s.tableLength=f.tableLength,this.s.rowData.totalOptions=this.s.tableLength;else if(null===this.s.tableLength||g.rows()[0].length>this.s.tableLength)this.s.tableLength=g.rows()[0].length,this.s.rowData.totalOptions=this.s.tableLength;b=g.column(this.s.index).dataSrc();if(void 0!==f[b])for(p=0,f=f[b];p<f.length;p++)b=f[p],this.s.rowData.arrayFilter.push({display:b.label,filter:b.value,sort:b.label,type:b.label}),this.s.rowData.bins[b.value]=
this.c.viewTotal||this.c.cascadePanes?b.count:b.total,this.s.rowData.binsTotal[b.value]=b.total;p=Object.keys(m.binsTotal).length;f=this._uniqueRatio(p,this.s.tableLength);if(!1===this.s.displayed&&((void 0===u.show&&null===u.threshold?f>this.c.threshold:f>u.threshold)||!0!==u.show&&1>=p)){this.dom.container.addClass(this.classes.hidden);this.s.displayed=!1;return}this.s.displayed=!0}}else this.s.displayed=!0;this._displayPane();if(!this.s.listSet)this.dom.dtP.on("stateLoadParams.dt",function(a,b,
f){d.isEmptyObject(g.state.loaded())&&d.each(f,function(a,b){delete f[a]})});null!==c&&0<d(this.dom.panesContainer).has(c).length?d(this.dom.panesContainer).insertAfter(c):d(this.dom.panesContainer).prepend(this.dom.container);p=d.fn.dataTable.ext.errMode;d.fn.dataTable.ext.errMode="none";c=n.Scroller;this.s.dtPane=d(this.dom.dtP).DataTable(d.extend(!0,{columnDefs:[{className:"dtsp-nameColumn",data:"display",render:function(a,b,f){if("sort"===b)return f.sort;if("type"===b)return f.type;var c;(l.s.filteringActive||
l.s.showFiltered)&&l.c.viewTotal?c=t.replace(/{total}/,f.total):c=k.replace(/{total}/,f.total);for(c=c.replace(/{shown}/,f.shown);-1!==c.indexOf("{total}");)c=c.replace(/{total}/,f.total);for(;-1!==c.indexOf("{shown}");)c=c.replace(/{shown}/,f.shown);b='<span class="'+l.classes.pill+'">'+c+"</span>";if(l.c.hideCount||u.hideCount)b="";return l.c.dataLength?null!==a&&a.length>l.c.dataLength?'<span title="'+a+'" class="'+l.classes.name+'">'+a.substr(0,l.c.dataLength)+"...</span>"+b:'<span class="'+l.classes.name+
'">'+a+"</span>"+b:'<span class="'+l.classes.name+'">'+a+"</span>"+b},targets:0,type:void 0!==g.settings()[0].aoColumns[this.s.index]?g.settings()[0].aoColumns[this.s.index]._sManualType:null},{className:"dtsp-countColumn "+this.classes.badgePill,data:"total",targets:1,visible:!1}],deferRender:!0,dom:"t",info:!1,paging:c?!0:!1,scrollY:"200px",scroller:c?!0:!1,select:!0,stateSave:g.settings()[0].oFeatures.bStateSave?!0:!1},this.c.dtOpts,void 0!==u?u.dtOpts:{},null!==this.customPaneSettings&&void 0!==
this.customPaneSettings.dtOpts?this.customPaneSettings.dtOpts:{}));d(this.dom.dtP).addClass(this.classes.table);d(this.dom.searchBox).attr("placeholder",void 0!==u.header?u.header:this.colExists?g.settings()[0].aoColumns[this.s.index].sTitle:this.customPaneSettings.header||"Custom Pane");d.fn.dataTable.select.init(this.s.dtPane);d.fn.dataTable.ext.errMode=p;if(this.colExists){e=(e=e.search())?e.substr(1,e.length-2).split("|"):[];var w=0;m.arrayFilter.forEach(function(a){""===a.filter&&w++});p=0;for(c=
m.arrayFilter.length;p<c;p++){e=!1;b=0;for(v=this.s.serverSelect;b<v.length;b++)f=v[b],f.filter===m.arrayFilter[p].filter&&(e=!0);if(this.s.dt.page.info().serverSide&&(!this.c.cascadePanes||this.c.cascadePanes&&0!==m.bins[m.arrayFilter[p].filter]||this.c.cascadePanes&&null!==h||e))for(e=this._addRow(m.arrayFilter[p].display,m.arrayFilter[p].filter,h?m.binsTotal[m.arrayFilter[p].filter]:m.bins[m.arrayFilter[p].filter],this.c.viewTotal||h?String(m.binsTotal[m.arrayFilter[p].filter]):m.bins[m.arrayFilter[p].filter],
m.arrayFilter[p].sort,m.arrayFilter[p].type),void 0!==u.preSelect&&-1!==u.preSelect.indexOf(m.arrayFilter[p].filter)&&e.select(),b=0,v=this.s.serverSelect;b<v.length;b++)f=v[b],f.filter===m.arrayFilter[p].filter&&(this.s.serverSelecting=!0,e.select(),this.s.serverSelecting=!1);else this.s.dt.page.info().serverSide||!m.arrayFilter[p]||void 0===m.bins[m.arrayFilter[p].filter]&&this.c.cascadePanes?this.s.dt.page.info().serverSide||this._addRow(this.c.emptyMessage,w,w,this.c.emptyMessage,this.c.emptyMessage,
this.c.emptyMessage):(e=this._addRow(m.arrayFilter[p].display,m.arrayFilter[p].filter,m.bins[m.arrayFilter[p].filter],m.binsTotal[m.arrayFilter[p].filter],m.arrayFilter[p].sort,m.arrayFilter[p].type),void 0!==u.preSelect&&-1!==u.preSelect.indexOf(m.arrayFilter[p].filter)&&e.select())}}(void 0!==u.options||null!==this.customPaneSettings&&void 0!==this.customPaneSettings.options)&&this._getComparisonRows();n.select.init(this.s.dtPane);this.s.dtPane.draw();this._adjustTopRow();this.s.listSet||(this._setListeners(),
this.s.listSet=!0);for(h=0;h<a.length;h++)if(m=a[h],void 0!==m)for(p=0,c=this.s.dtPane.rows().indexes().toArray();p<c.length;p++)e=c[p],void 0!==this.s.dtPane.row(e).data()&&m.filter===this.s.dtPane.row(e).data().filter&&(this.s.dt.page.info().serverSide?(this.s.serverSelecting=!0,this.s.dtPane.row(e).select(),this.s.serverSelecting=!1):this.s.dtPane.row(e).select());this.s.dt.draw();if(q&&q.searchPanes&&q.searchPanes.panes)for(this.c.cascadePanes||this._reloadSelect(q),a=0,q=q.searchPanes.panes;a<
q.length;a++)h=q[a],h.id===this.s.index&&(d(this.dom.searchBox).val(h.searchTerm),d(this.dom.searchBox).trigger("input"),this.s.dtPane.order(h.order).draw());this.s.dt.state.save();return!0};c.prototype._detailsPane=function(){var a=this,b=this.s.dt;this.s.rowData.arrayTotals=[];this.s.rowData.binsTotal={};var f=this.s.dt.settings()[0];b.rows().every(function(b){a._populatePaneArray(b,a.s.rowData.arrayTotals,f,a.s.rowData.binsTotal)})};c.prototype._displayPane=function(){var a=this.dom.container,
b=this.s.colOpts,f=parseInt(this.c.layout.split("-")[1],10);d(this.dom.topRow).empty();d(this.dom.dtP).empty();d(this.dom.topRow).addClass(this.classes.topRow);3<f&&d(this.dom.container).addClass(this.classes.smallGap);d(this.dom.topRow).addClass(this.classes.subRowsContainer);d(this.dom.upper).appendTo(this.dom.topRow);d(this.dom.lower).appendTo(this.dom.topRow);d(this.dom.searchCont).appendTo(this.dom.upper);d(this.dom.buttonGroup).appendTo(this.dom.lower);(!1===this.c.dtOpts.searching||void 0!==
b.dtOpts&&!1===b.dtOpts.searching||!this.c.controls||!b.controls||null!==this.customPaneSettings&&void 0!==this.customPaneSettings.dtOpts&&void 0!==this.customPaneSettings.dtOpts.searching&&!this.customPaneSettings.dtOpts.searching)&&d(this.dom.searchBox).attr("disabled","disabled").removeClass(this.classes.paneInputButton).addClass(this.classes.disabledButton);d(this.dom.searchBox).appendTo(this.dom.searchCont);this._searchContSetup();this.c.clear&&this.c.controls&&b.controls&&d(this.dom.clear).appendTo(this.dom.buttonGroup);
this.c.orderable&&b.orderable&&this.c.controls&&b.controls&&d(this.dom.nameButton).appendTo(this.dom.buttonGroup);!this.c.hideCount&&!b.hideCount&&this.c.orderable&&b.orderable&&this.c.controls&&b.controls&&d(this.dom.countButton).appendTo(this.dom.buttonGroup);d(this.dom.topRow).prependTo(this.dom.container);d(a).append(this.dom.dtP);d(a).show()};c.prototype._getBonusOptions=function(){return d.extend(!0,{},c.defaults,{orthogonal:{threshold:null},threshold:null},void 0!==this.c?this.c:{})};c.prototype._getComparisonRows=
function(){var a=this.s.colOpts;a=void 0!==a.options?a.options:null!==this.customPaneSettings&&void 0!==this.customPaneSettings.options?this.customPaneSettings.options:void 0;if(void 0!==a){var b=this.s.dt.rows({search:"applied"}).data().toArray(),f=this.s.dt.rows({search:"applied"}),c=this.s.dt.rows().data().toArray(),l=this.s.dt.rows(),d=[];this.s.dtPane.clear();for(var g=0;g<a.length;g++){var e=a[g],u=""!==e.label?e.label:this.c.emptyMessage,m=u,k="function"===typeof e.value?e.value:[],n=0,q=u,
t=0;if("function"===typeof e.value){for(var p=0;p<b.length;p++)e.value.call(this.s.dt,b[p],f[0][p])&&n++;for(p=0;p<c.length;p++)e.value.call(this.s.dt,c[p],l[0][p])&&t++;"function"!==typeof k&&k.push(e.filter)}(!this.c.cascadePanes||this.c.cascadePanes&&0!==n)&&d.push(this._addRow(m,k,n,t,q,u))}return d}};c.prototype._getOptions=function(){return d.extend(!0,{},c.defaults,{orthogonal:{threshold:null},threshold:null},this.s.dt.settings()[0].aoColumns[this.s.index].searchPanes)};c.prototype._makeSelection=
function(){this.updateTable();this.s.updating=!0;this.s.dt.draw();this.s.updating=!1};c.prototype._populatePane=function(a){void 0===a&&(a=!1);var b=this.s.dt;this.s.rowData.arrayFilter=[];this.s.rowData.bins={};var f=this.s.dt.settings()[0];if(!this.s.dt.page.info().serverSide){var c=0;for(a=(!this.c.cascadePanes&&!this.c.viewTotal||this.s.clearing||a?b.rows().indexes():b.rows({search:"applied"}).indexes()).toArray();c<a.length;c++)this._populatePaneArray(a[c],this.s.rowData.arrayFilter,f)}};c.prototype._populatePaneArray=
function(a,b,f,c){void 0===c&&(c=this.s.rowData.bins);var h=this.s.colOpts;if("string"===typeof h.orthogonal)f=f.oApi._fnGetCellData(f,a,this.s.index,h.orthogonal),this.s.rowData.filterMap.set(a,f),this._addOption(f,f,f,f,b,c);else{var d=f.oApi._fnGetCellData(f,a,this.s.index,h.orthogonal.search);this.s.rowData.filterMap.set(a,d);c[d]?c[d]++:(c[d]=1,this._addOption(d,f.oApi._fnGetCellData(f,a,this.s.index,h.orthogonal.display),f.oApi._fnGetCellData(f,a,this.s.index,h.orthogonal.sort),f.oApi._fnGetCellData(f,
a,this.s.index,h.orthogonal.type),b,c));this.s.rowData.totalOptions++}};c.prototype._reloadSelect=function(a){if(void 0!==a){for(var b,f=0;f<a.searchPanes.panes.length;f++)if(a.searchPanes.panes[f].id===this.s.index){b=f;break}if(void 0!==b){f=this.s.dtPane;var c=f.rows({order:"index"}).data().map(function(a){return null!==a.filter?a.filter.toString():null}).toArray(),l=0;for(a=a.searchPanes.panes[b].selected;l<a.length;l++){b=a[l];var d=-1;null!==b&&(d=c.indexOf(b.toString()));-1<d&&(f.row(d).select(),
this.s.dt.state.save())}}}};c.prototype._search=function(a,b){for(var f=this.s.colOpts,c=this.s.dt,l=0,d=this.selections;l<d.length;l++){var g=d[l];if(Array.isArray(a)){if(-1!==a.indexOf(g.filter))return!0}else if("function"===typeof g.filter)if(g.filter.call(c,c.row(b).data(),b)){if("or"===f.combiner)return!0}else{if("and"===f.combiner)return!1}else if(a===g.filter)return!0}return"and"===f.combiner?!0:!1};c.prototype._searchContSetup=function(){this.c.controls&&this.s.colOpts.controls&&d(this.dom.searchButton).appendTo(this.dom.searchLabelCont);
!1===this.c.dtOpts.searching||!1===this.s.colOpts.dtOpts.searching||null!==this.customPaneSettings&&void 0!==this.customPaneSettings.dtOpts&&void 0!==this.customPaneSettings.dtOpts.searching&&!this.customPaneSettings.dtOpts.searching||d(this.dom.searchLabelCont).appendTo(this.dom.searchCont)};c.prototype._searchExtras=function(){var a=this.s.updating;this.s.updating=!0;var b=this.s.dtPane.rows({selected:!0}).data().pluck("filter").toArray(),f=b.indexOf(this.c.emptyMessage),c=d(this.s.dtPane.table().container());
-1<f&&(b[f]="");0<b.length?c.addClass(this.classes.selected):0===b.length&&c.removeClass(this.classes.selected);this.s.updating=a};c.prototype._uniqueRatio=function(a,b){return 0<b&&(0<this.s.rowData.totalOptions&&!this.s.dt.page.info().serverSide||this.s.dt.page.info().serverSide&&0<this.s.tableLength)?a/this.s.rowData.totalOptions:1};c.prototype._updateCommon=function(a){void 0===a&&(a=!1);if(!(this.s.dt.page.info().serverSide||void 0===this.s.dtPane||this.s.filteringActive&&!this.c.cascadePanes&&
!0!==a||!0===this.c.cascadePanes&&!0===this.s.selectPresent||this.s.lastSelect&&this.s.lastCascade)){var b=this.s.colOpts,c=this.s.dtPane.rows({selected:!0}).data().toArray();a=d(this.s.dtPane.table().node()).parent()[0].scrollTop;var h=this.s.rowData;this.s.dtPane.clear();if(this.colExists){0===h.arrayFilter.length?this._populatePane():this.c.cascadePanes&&this.s.dt.rows().data().toArray().length===this.s.dt.rows({search:"applied"}).data().toArray().length?(h.arrayFilter=h.arrayOriginal,h.bins=h.binsOriginal):
(this.c.viewTotal||this.c.cascadePanes)&&this._populatePane();this.c.viewTotal?this._detailsPane():h.binsTotal=h.bins;this.c.viewTotal&&!this.c.cascadePanes&&(h.arrayFilter=h.arrayTotals);for(var l=function(a){if(a&&(void 0!==h.bins[a.filter]&&0!==h.bins[a.filter]&&e.c.cascadePanes||!e.c.cascadePanes||e.s.clearing)){var b=e._addRow(a.display,a.filter,e.c.viewTotal?void 0!==h.bins[a.filter]?h.bins[a.filter]:0:h.bins[a.filter],e.c.viewTotal?String(h.binsTotal[a.filter]):h.bins[a.filter],a.sort,a.type),
f=c.findIndex(function(b){return b.filter===a.filter});-1!==f&&(b.select(),c.splice(f,1))}},e=this,g=0,k=h.arrayFilter;g<k.length;g++)l(k[g])}if(void 0!==b.searchPanes&&void 0!==b.searchPanes.options||void 0!==b.options||null!==this.customPaneSettings&&void 0!==this.customPaneSettings.options)for(l=function(a){var b=c.findIndex(function(b){if(b.display===a.data().display)return!0});-1!==b&&(a.select(),c.splice(b,1))},g=0,k=this._getComparisonRows();g<k.length;g++)b=k[g],l(b);for(l=0;l<c.length;l++)b=
c[l],b=this._addRow(b.display,b.filter,0,this.c.viewTotal?b.total:0,b.filter,b.filter),this.s.updating=!0,b.select(),this.s.updating=!1;this.s.dtPane.draw();this.s.dtPane.table().node().parentNode.scrollTop=a}};c.version="1.1.0";c.classes={buttonGroup:"dtsp-buttonGroup",buttonSub:"dtsp-buttonSub",clear:"dtsp-clear",clearAll:"dtsp-clearAll",clearButton:"clearButton",container:"dtsp-searchPane",countButton:"dtsp-countButton",disabledButton:"dtsp-disabledButton",dull:"dtsp-dull",hidden:"dtsp-hidden",
hide:"dtsp-hide",layout:"dtsp-",name:"dtsp-name",nameButton:"dtsp-nameButton",narrow:"dtsp-narrow",paneButton:"dtsp-paneButton",paneInputButton:"dtsp-paneInputButton",pill:"dtsp-pill",search:"dtsp-search",searchCont:"dtsp-searchCont",searchIcon:"dtsp-searchIcon",searchLabelCont:"dtsp-searchButtonCont",selected:"dtsp-selected",smallGap:"dtsp-smallGap",subRow1:"dtsp-subRow1",subRow2:"dtsp-subRow2",subRowsContainer:"dtsp-subRowsContainer",title:"dtsp-title",topRow:"dtsp-topRow"};c.defaults={cascadePanes:!1,
clear:!0,combiner:"or",controls:!0,container:function(a){return a.table().container()},dataLength:30,dtOpts:{},emptyMessage:"<i>No Data</i>",hideCount:!1,layout:"columns-3",name:void 0,orderable:!0,orthogonal:{display:"display",hideCount:!1,search:"filter",show:void 0,sort:"sort",threshold:.6,type:"type"},preSelect:[],threshold:.6,viewTotal:!1};return c}(),k,v,w=function(){function c(a,b,f){var h=this;void 0===f&&(f=!1);this.regenerating=!1;if(!v||!v.versionCheck||!v.versionCheck("1.10.0"))throw Error("SearchPane requires DataTables 1.10 or newer");
if(!v.select)throw Error("SearchPane requires Select");var l=new v.Api(a);this.classes=k.extend(!0,{},c.classes);this.c=k.extend(!0,{},c.defaults,b);this.dom={clearAll:k('<button type="button">Clear All</button>').addClass(this.classes.clearAll),container:k("<div/>").addClass(this.classes.panes).text(l.i18n("searchPanes.loadMessage","Loading Search Panes...")),emptyMessage:k("<div/>").addClass(this.classes.emptyMessage),options:k("<div/>").addClass(this.classes.container),panes:k("<div/>").addClass(this.classes.container),
title:k("<div/>").addClass(this.classes.title),titleRow:k("<div/>").addClass(this.classes.titleRow),wrapper:k("<div/>")};this.s={colOpts:[],dt:l,filterPane:-1,panes:[],selectionList:[],serverData:{},updating:!1};if(void 0===l.settings()[0]._searchPanes)if(l.on("xhr",function(a,b,c,f){c.searchPanes&&c.searchPanes.options&&(h.s.serverData=c.searchPanes.options,h.s.serverData.tableLength=c.recordsTotal,(h.c.viewTotal||h.c.cascadePanes)&&h._serverTotals())}),l.settings()[0]._searchPanes=this,this.dom.clearAll.text(l.i18n("searchPanes.clearMessage",
"Clear All")),this._getState(),this.s.dt.settings()[0]._bInitComplete||f)this._paneDeclare(l,a,b);else l.one("preInit.dt",function(c){h._paneDeclare(l,a,b)})}c.prototype.clearSelections=function(){this.dom.container.find(this.classes.search).each(function(){k(this).val("");k(this).trigger("input")});for(var a=[],b=0,c=this.s.panes;b<c.length;b++){var h=c[b];void 0!==h.s.dtPane&&a.push(h.clearPane())}this.s.dt.draw();return a};c.prototype.getNode=function(){return this.dom.container};c.prototype.rebuild=
function(a,b){void 0===a&&(a=!1);void 0===b&&(b=!1);k(this.dom.emptyMessage).remove();var c=[];k(this.dom.panes).empty();for(var h=0,l=this.s.panes;h<l.length;h++){var d=l[h];if(!1===a||d.s.index===a)d.clearData(),c.push(d.rebuildPane(void 0!==this.s.selectionList[this.s.selectionList.length-1]?d.s.index===this.s.selectionList[this.s.selectionList.length-1].index:!1,this.s.dt.page.info().serverSide?this.s.serverData:void 0,null,b));k(this.dom.panes).append(d.dom.container)}this.c.cascadePanes||this.c.viewTotal?
this.redrawPanes(!0):this._updateSelection();this._updateFilterCount();this._attachPaneContainer();this.s.dt.draw();return 1===c.length?c[0]:c};c.prototype.redrawPanes=function(a){void 0===a&&(a=!1);var b=this.s.dt;if(!this.s.updating&&!this.s.dt.page.info().serverSide){var c=!0,h=this.s.filterPane;if(b.rows({search:"applied"}).data().toArray().length===b.rows().data().toArray().length)c=!1;else if(this.c.viewTotal)for(var d=0,e=this.s.panes;d<e.length;d++){var g=e[d];if(void 0!==g.s.dtPane){var k=
g.s.dtPane.rows({selected:!0}).data().toArray().length;if(0===k)for(var u=0,m=this.s.selectionList;u<m.length;u++){var n=m[u];n.index===g.s.index&&0!==n.rows.length&&(k=n.rows.length)}0<k&&-1===h?h=g.s.index:0<k&&(h=null)}}e=void 0;d=[];if(this.regenerating){e=-1;1===d.length&&(e=d[0].index);a=0;for(d=this.s.panes;a<d.length;a++)if(g=d[a],void 0!==g.s.dtPane){b=!0;g.s.filteringActive=!0;if(-1!==h&&null!==h&&h===g.s.index||!1===c||g.s.index===e)b=!1,g.s.filteringActive=!1;g.updatePane(b?c:b)}this._updateFilterCount()}else{k=
0;for(u=this.s.panes;k<u.length;k++)if(g=u[k],g.s.selectPresent){this.s.selectionList.push({index:g.s.index,rows:g.s.dtPane.rows({selected:!0}).data().toArray(),protect:!1});b.state.save();break}else g.s.deselect&&(e=g.s.index,m=g.s.dtPane.rows({selected:!0}).data().toArray(),0<m.length&&this.s.selectionList.push({index:g.s.index,rows:m,protect:!0}));if(0<this.s.selectionList.length)for(b=this.s.selectionList[this.s.selectionList.length-1].index,k=0,u=this.s.panes;k<u.length;k++)g=u[k],g.s.lastSelect=
g.s.index===b;for(g=0;g<this.s.selectionList.length;g++)if(this.s.selectionList[g].index!==e||!0===this.s.selectionList[g].protect){b=!1;for(k=g+1;k<this.s.selectionList.length;k++)this.s.selectionList[k].index===this.s.selectionList[g].index&&(b=!0);b||(d.push(this.s.selectionList[g]),this.s.selectionList[g].protect=!1)}e=-1;1===d.length&&(e=d[0].index);k=0;for(u=this.s.panes;k<u.length;k++)if(g=u[k],void 0!==g.s.dtPane){b=!0;g.s.filteringActive=!0;if(-1!==h&&null!==h&&h===g.s.index||!1===c||g.s.index===
e)b=!1,g.s.filteringActive=!1;g.updatePane(b?c:!1)}this._updateFilterCount();if(0<d.length&&(d.length<this.s.selectionList.length||a))for(this._cascadeRegen(d),b=d[d.length-1].index,h=0,a=this.s.panes;h<a.length;h++)g=a[h],g.s.lastSelect=g.s.index===b;else if(0<d.length)for(g=0,a=this.s.panes;g<a.length;g++)if(d=a[g],void 0!==d.s.dtPane){b=!0;d.s.filteringActive=!0;if(-1!==h&&null!==h&&h===d.s.index||!1===c)b=!1,d.s.filteringActive=!1;d.updatePane(b?c:b)}}c||(this.s.selectionList=[])}};c.prototype._attach=
function(){var a=this;k(this.dom.container).removeClass(this.classes.hide);k(this.dom.titleRow).removeClass(this.classes.hide);k(this.dom.titleRow).remove();k(this.dom.title).appendTo(this.dom.titleRow);this.c.clear&&(k(this.dom.clearAll).appendTo(this.dom.titleRow),k(this.dom.clearAll).on("click.dtsps",function(){a.clearSelections()}));k(this.dom.titleRow).appendTo(this.dom.container);for(var b=0,c=this.s.panes;b<c.length;b++)k(c[b].dom.container).appendTo(this.dom.panes);k(this.dom.panes).appendTo(this.dom.container);
0===k("div."+this.classes.container).length&&k(this.dom.container).prependTo(this.s.dt);return this.dom.container};c.prototype._attachExtras=function(){k(this.dom.container).removeClass(this.classes.hide);k(this.dom.titleRow).removeClass(this.classes.hide);k(this.dom.titleRow).remove();k(this.dom.title).appendTo(this.dom.titleRow);this.c.clear&&k(this.dom.clearAll).appendTo(this.dom.titleRow);k(this.dom.titleRow).appendTo(this.dom.container);return this.dom.container};c.prototype._attachMessage=function(){try{var a=
this.s.dt.i18n("searchPanes.emptyPanes","No SearchPanes")}catch(b){a=null}if(null===a)k(this.dom.container).addClass(this.classes.hide),k(this.dom.titleRow).removeClass(this.classes.hide);else return k(this.dom.container).removeClass(this.classes.hide),k(this.dom.titleRow).addClass(this.classes.hide),k(this.dom.emptyMessage).text(a),this.dom.emptyMessage.appendTo(this.dom.container),this.dom.container};c.prototype._attachPaneContainer=function(){for(var a=0,b=this.s.panes;a<b.length;a++)if(!0===b[a].s.displayed)return this._attach();
return this._attachMessage()};c.prototype._cascadeRegen=function(a){this.regenerating=!0;var b=-1;1===a.length&&(b=a[0].index);for(var c=0,d=this.s.panes;c<d.length;c++){var e=d[c];e.setCascadeRegen(!0);e.setClear(!0);(void 0!==e.s.dtPane&&e.s.index===b||void 0!==e.s.dtPane)&&e.clearPane();e.setClear(!1)}this._makeCascadeSelections(a);this.s.selectionList=a;a=0;for(b=this.s.panes;a<b.length;a++)e=b[a],e.setCascadeRegen(!1);this.regenerating=!1};c.prototype._checkMessage=function(){for(var a=0,b=this.s.panes;a<
b.length;a++)if(!0===b[a].s.displayed)return;return this._attachMessage()};c.prototype._getState=function(){var a=this.s.dt.state.loaded();a&&a.searchPanes&&void 0!==a.searchPanes.selectionList&&(this.s.selectionList=a.searchPanes.selectionList)};c.prototype._makeCascadeSelections=function(a){for(var b=0;b<a.length;b++)for(var c=function(c){if(c.s.index===a[b].index&&void 0!==c.s.dtPane){b===a.length-1&&(c.s.lastCascade=!0);0<c.s.dtPane.rows({selected:!0}).data().toArray().length&&void 0!==c.s.dtPane&&
(c.setClear(!0),c.clearPane(),c.setClear(!1));for(var f=function(a){c.s.dtPane.rows().every(function(b){void 0!==c.s.dtPane.row(b).data()&&void 0!==a&&c.s.dtPane.row(b).data().filter===a.filter&&c.s.dtPane.row(b).select()})},h=0,e=a[b].rows;h<e.length;h++)f(e[h]);d._updateFilterCount();c.s.lastCascade=!1}},d=this,e=0,k=this.s.panes;e<k.length;e++)c(k[e]);this.s.dt.state.save()};c.prototype._paneDeclare=function(a,b,c){var f=this;a.columns(0<this.c.columns.length?this.c.columns:void 0).eq(0).each(function(a){f.s.panes.push(new q(b,
c,a,f.c.layout,f.dom.panes))});for(var d=a.columns().eq(0).toArray().length,e=this.c.panes.length,g=0;g<e;g++)this.s.panes.push(new q(b,c,d+g,this.c.layout,this.dom.panes,this.c.panes[g]));if(0<this.c.order.length)for(d=this.c.order.map(function(a,b,c){return f._findPane(a)}),this.dom.panes.empty(),this.s.panes=d,d=0,e=this.s.panes;d<e.length;d++)this.dom.panes.append(e[d].dom.container);this.s.dt.settings()[0]._bInitComplete?this._paneStartup(a):this.s.dt.settings()[0].aoInitComplete.push({fn:function(){f._paneStartup(a)}})};
c.prototype._findPane=function(a){for(var b=0,c=this.s.panes;b<c.length;b++){var d=c[b];if(a===d.s.name)return d}};c.prototype._paneStartup=function(a){var b=this;500>=this.s.dt.page.info().recordsTotal?this._startup(a):setTimeout(function(){b._startup(a)},100)};c.prototype._serverTotals=function(){for(var a=!1,b=!1,c=this.s.dt,d=0,e=this.s.panes;d<e.length;d++){var r=e[d];if(r.s.selectPresent){this.s.selectionList.push({index:r.s.index,rows:r.s.dtPane.rows({selected:!0}).data().toArray(),protect:!1});
c.state.save();r.s.selectPresent=!1;a=!0;break}else r.s.deselect&&(b=r.s.dtPane.rows({selected:!0}).data().toArray(),0<b.length&&this.s.selectionList.push({index:r.s.index,rows:b,protect:!0}),b=a=!0)}if(a){r=[];for(c=0;c<this.s.selectionList.length;c++){d=!1;for(e=c+1;e<this.s.selectionList.length;e++)this.s.selectionList[e].index===this.s.selectionList[c].index&&(d=!0);!d&&0<this.s.panes[this.s.selectionList[c].index].s.dtPane.rows({selected:!0}).data().toArray().length&&r.push(this.s.selectionList[c])}this.s.selectionList=
r}else this.s.selectionList=[];c=-1;if(b&&1===this.s.selectionList.length)for(b=0,d=this.s.panes;b<d.length;b++)r=d[b],r.s.lastSelect=!1,r.s.deselect=!1,void 0!==r.s.dtPane&&0<r.s.dtPane.rows({selected:!0}).data().toArray().length&&(c=r.s.index);else if(0<this.s.selectionList.length)for(b=this.s.selectionList[this.s.selectionList.length-1].index,d=0,e=this.s.panes;d<e.length;d++)r=e[d],r.s.lastSelect=r.s.index===b,r.s.deselect=!1;else if(0===this.s.selectionList.length)for(b=0,d=this.s.panes;b<d.length;b++)r=
d[b],r.s.lastSelect=!1,r.s.deselect=!1;k(this.dom.panes).empty();b=0;for(d=this.s.panes;b<d.length;b++)r=d[b],r.s.lastSelect?r._setListeners():r.rebuildPane(void 0,this.s.dt.page.info().serverSide?this.s.serverData:void 0,r.s.index===c?!0:null,!0),k(this.dom.panes).append(r.dom.container),void 0!==r.s.dtPane&&(k(r.s.dtPane.table().node()).parent()[0].scrollTop=r.s.scrollTop,k.fn.dataTable.select.init(r.s.dtPane))};c.prototype._startup=function(a){var b=this;k(this.dom.container).text("");this._attachExtras();
k(this.dom.container).append(this.dom.panes);k(this.dom.panes).empty();if(this.c.viewTotal&&!this.c.cascadePanes){var c=this.s.dt.state.loaded();if(null!==c&&void 0!==c&&void 0!==c.searchPanes&&void 0!==c.searchPanes.panes){for(var d=!1,e=0,r=c.searchPanes.panes;e<r.length;e++)if(c=r[e],0<c.selected.length){d=!0;break}if(d)for(d=0,e=this.s.panes;d<e.length;d++)c=e[d],c.s.showFiltered=!0}}d=0;for(e=this.s.panes;d<e.length;d++)c=e[d],c.rebuildPane(void 0,this.s.dt.page.info().serverSide?this.s.serverData:
void 0),k(this.dom.panes).append(c.dom.container);if(this.c.viewTotal&&!this.c.cascadePanes)for(d=0,e=this.s.panes;d<e.length;d++)c=e[d],c.updatePane();this._updateFilterCount();this._checkMessage();a.on("draw.dtsps",function(){b._updateFilterCount();!b.c.cascadePanes&&!b.c.viewTotal||b.s.dt.page.info().serverSide?b._updateSelection():b.redrawPanes();b.s.filterPane=-1});this.s.dt.on("stateSaveParams.dtsp",function(a,c,d){void 0===d.searchPanes&&(d.searchPanes={});d.searchPanes.selectionList=b.s.selectionList});
this.s.dt.on("xhr",function(){var a=!1;if(!b.s.dt.page.info().serverSide)b.s.dt.one("draw",function(){if(!a){a=!0;k(b.dom.panes).empty();for(var c=0,d=b.s.panes;c<d.length;c++){var e=d[c];e.clearData();e.rebuildPane(void 0!==b.s.selectionList[b.s.selectionList.length-1]?e.s.index===b.s.selectionList[b.s.selectionList.length-1].index:!1,void 0,void 0,!0);k(b.dom.panes).append(e.dom.container)}b.c.cascadePanes||b.c.viewTotal?b.redrawPanes(b.c.cascadePanes):b._updateSelection();b._checkMessage()}})});
if(void 0!==this.s.selectionList&&0<this.s.selectionList.length)for(d=this.s.selectionList[this.s.selectionList.length-1].index,e=0,r=this.s.panes;e<r.length;e++)c=r[e],c.s.lastSelect=c.s.index===d;0<this.s.selectionList.length&&this.c.cascadePanes&&this._cascadeRegen(this.s.selectionList);a.columns(0<this.c.columns.length?this.c.columns:void 0).eq(0).each(function(a){if(void 0!==b.s.panes[a]&&void 0!==b.s.panes[a].s.dtPane&&void 0!==b.s.panes[a].s.colOpts.preSelect)for(var c=b.s.panes[a].s.dtPane.rows().data().toArray().length,
d=0;d<c;d++)-1!==b.s.panes[a].s.colOpts.preSelect.indexOf(b.s.panes[a].s.dtPane.cell(d,0).data())&&(b.s.panes[a].s.dtPane.row(d).select(),b.s.panes[a].updateTable())});this._updateFilterCount();a.on("destroy.dtsps",function(){for(var c=0,d=b.s.panes;c<d.length;c++)d[c].destroy();a.off(".dtsps");k(b.dom.clearAll).off(".dtsps");k(b.dom.container).remove();b.clearSelections()});if(this.c.clear)k(this.dom.clearAll).on("click.dtsps",function(){b.clearSelections()});if(this.s.dt.page.info().serverSide)a.on("preXhr.dt",
function(a,c,d){void 0===d.searchPanes&&(d.searchPanes={});a=0;for(c=b.s.panes;a<c.length;a++){var e=c[a],f=b.s.dt.column(e.s.index).dataSrc();void 0===d.searchPanes[f]&&(d.searchPanes[f]={});if(void 0!==e.s.dtPane){e=e.s.dtPane.rows({selected:!0}).data().toArray();for(var g=0;g<e.length;g++)d.searchPanes[f][g]=e[g].display}}b.c.viewTotal&&b._prepViewTotal()});else a.on("preXhr.dt",function(a,c,d){a=0;for(c=b.s.panes;a<c.length;a++)c[a].clearData()});a.settings()[0]._searchPanes=this};c.prototype._prepViewTotal=
function(){for(var a=this.s.filterPane,b=!1,c=0,d=this.s.panes;c<d.length;c++){var e=d[c];if(void 0!==e.s.dtPane){var k=e.s.dtPane.rows({selected:!0}).data().toArray().length;0<k&&-1===a?(a=e.s.index,b=!0):0<k&&(a=null)}}c=0;for(d=this.s.panes;c<d.length;c++)if(e=d[c],void 0!==e.s.dtPane&&(e.s.filteringActive=!0,-1!==a&&null!==a&&a===e.s.index||!1===b))e.s.filteringActive=!1};c.prototype._updateFilterCount=function(){for(var a=0,b=0,c=this.s.panes;b<c.length;b++){var d=c[b];void 0!==d.s.dtPane&&(a+=
d.getPaneCount())}b=this.s.dt.i18n("searchPanes.title","Filters Active - %d",a);k(this.dom.title).text(b);void 0!==this.c.filterChanged&&"function"===typeof this.c.filterChanged&&this.c.filterChanged(a)};c.prototype._updateSelection=function(){this.s.selectionList=[];for(var a=0,b=this.s.panes;a<b.length;a++){var c=b[a];void 0!==c.s.dtPane&&this.s.selectionList.push({index:c.s.index,rows:c.s.dtPane.rows({selected:!0}).data().toArray(),protect:!1})}this.s.dt.state.save()};c.version="1.1.1";c.classes=
{clear:"dtsp-clear",clearAll:"dtsp-clearAll",container:"dtsp-searchPanes",emptyMessage:"dtsp-emptyMessage",hide:"dtsp-hidden",panes:"dtsp-panesContainer",search:"dtsp-search",title:"dtsp-title",titleRow:"dtsp-titleRow"};c.defaults={cascadePanes:!1,clear:!0,container:function(a){return a.table().container()},columns:[],filterChanged:void 0,layout:"columns-3",order:[],panes:[],viewTotal:!1};return c}();(function(c){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(a){return c(a,
window,document)}):"object"===typeof exports?module.exports=function(a,b){a||(a=window);b&&b.fn.dataTable||(b=require("datatables.net")(a,b).$);return c(b,a,a.document)}:c(window.jQuery,window,document)})(function(c,a,b){function d(a,b){void 0===b&&(b=!1);a=new h.Api(a);var c=a.init().searchPanes||h.defaults.searchPanes;return(new w(a,c,b)).getNode()}e(c);t(c);var h=c.fn.dataTable;c.fn.dataTable.SearchPanes=w;c.fn.DataTable.SearchPanes=w;c.fn.dataTable.SearchPane=q;c.fn.DataTable.SearchPane=q;h.Api.register("searchPanes.rebuild()",
function(){return this.iterator("table",function(){this.searchPanes&&this.searchPanes.rebuild()})});h.Api.register("column().paneOptions()",function(a){return this.iterator("column",function(b){b=this.aoColumns[b];b.searchPanes||(b.searchPanes={});b.searchPanes.values=a;this.searchPanes&&this.searchPanes.rebuild()})});a=c.fn.dataTable.Api.register;a("searchPanes()",function(){return this});a("searchPanes.clearSelections()",function(){this.context[0]._searchPanes.clearSelections();return this});a("searchPanes.rebuildPane()",
function(a,b){this.context[0]._searchPanes.rebuild(a,b);return this});a("searchPanes.container()",function(){return this.context[0]._searchPanes.getNode()});c.fn.dataTable.ext.buttons.searchPanesClear={text:"Clear Panes",action:function(a,b,c,d){b.searchPanes.clearSelections()}};c.fn.dataTable.ext.buttons.searchPanes={action:function(a,b,c,d){a.stopPropagation();this.popover(d._panes.getNode(),{align:"dt-container"})},config:{},init:function(a,b,d){var e=new c.fn.dataTable.SearchPanes(a,c.extend({filterChanged:function(c){a.button(b).text(a.i18n("searchPanes.collapse",
{0:"SearchPanes",_:"SearchPanes (%d)"},c))}},d.config)),f=a.i18n("searchPanes.collapse","SearchPanes",0);a.button(b).text(f);d._panes=e},text:"Search Panes"};c(b).on("preInit.dt.dtsp",function(a,b,c){"dt"===a.namespace&&(b.oInit.searchPanes||h.defaults.searchPanes)&&(b._searchPanes||d(b,!0))});h.ext.feature.push({cFeature:"P",fnInit:d});h.ext.features&&h.ext.features.register("searchPanes",d)})})();
