<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title></title>

<script src="libs/jquery/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap/js/bootstrap.min.js"></script>
<script src="libs/bootstrap/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap/shim/respond.min.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/datatables/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="libs/datatables/js/jquery.dataTables.min.js"></script>
<script src="libs/datatables-binding/datatables.js"></script>
<style type="text/css">
table, table th, table td {
  border: none;
}
/* padding for bootstrap navbar */
body {
  padding-top: 70px;
}
</style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">


<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="./">DT</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="./">Home</a></li>
        <li><a href="options.html">Options</a></li>
        <li><a href="functions.html">Functions</a></li>
        <li><a href="server.html">Server-side Processing</a></li>
        <li><a href="extensions.html">Extensions</a></li>
        <li><a href="shiny.html">Shiny</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/rstudio/DT" title="View Source on Github"><span class="glyphicon glyphicon-download"></span></a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</nav><!--/.navbar -->



<p>We have been using client-side processing in all the above examples, i.e., searching, pagination, and ordering are done using JavaScript in the web browser. When the size of the data is huge, it may be more efficient to process the data on the server. DataTables supports retrieving data from a server by sending Ajax requests, a.k.a the <a href="http://datatables.net/examples/data_sources/server_side.html">“server-side processing”</a>.</p>
<p>To enable server-side processing, we need to use the option <code>serverSide</code>, e.g.,</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">datatable</span>(..., <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">serverSide =</span> <span class="ot">TRUE</span>))</code></pre>
<p>In fact, <code>datatable()</code> has an argument <code>server</code> that can be set to <code>TRUE</code>, which will automatically set <code>serverSide = TRUE</code> in <code>options</code>.</p>
<div id="a-jsonp-example" class="section level1">
<h1><span class="header-section-number">1</span> A JSONP Example</h1>
<p>Now let’s try the <a href="http://datatables.net/examples/server_side/jsonp.html">JSONP data source example</a> on the DataTables website. It is fairly simple to reproduce that example here using the <code>datatable()</code> function with an option <code>ajax</code> that specifies the data URL:</p>
<pre class="sourceCode r"><code class="sourceCode r">employee =<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="st">`</span><span class="dt">First name</span><span class="st">`</span> =<span class="st"> </span><span class="kw">character</span>(), <span class="st">`</span><span class="dt">Last name</span><span class="st">`</span> =<span class="st"> </span><span class="kw">character</span>(), <span class="dt">Position =</span> <span class="kw">character</span>(),
  <span class="dt">Office =</span> <span class="kw">character</span>(), <span class="st">`</span><span class="dt">Start date</span><span class="st">`</span> =<span class="st"> </span><span class="kw">character</span>(), <span class="dt">Salary =</span> <span class="kw">numeric</span>(),
  <span class="dt">check.names =</span> <span class="ot">FALSE</span>
)
<span class="kw">datatable</span>(employee, <span class="dt">server =</span> <span class="ot">TRUE</span>, <span class="dt">options =</span> <span class="kw">list</span>(
  <span class="dt">processing =</span> <span class="ot">TRUE</span>,
  <span class="dt">ajax =</span> <span class="kw">list</span>(
    <span class="dt">url =</span> <span class="st">&#39;http://datatables.net/examples/server_side/scripts/jsonp.php&#39;</span>,
    <span class="dt">dataType =</span> <span class="st">&#39;jsonp&#39;</span>
  )
))</code></pre>
<p><div id="htmlwidget-5716" style="width:100%;height:auto;" class="datatables"></div>
<script type="application/json" data-for="htmlwidget-5716">{ "x": {
 "data": null,
"isDF": false,
"container": "<table>\n  <thead>\n    <tr>\n      <th>First name</th>\n      <th>Last name</th>\n      <th>Position</th>\n      <th>Office</th>\n      <th>Start date</th>\n      <th>Salary</th>\n    </tr>\n  </thead>\n</table>",
"options": {
 "processing": true,
"ajax": {
 "url": "http://datatables.net/examples/server_side/scripts/jsonp.php",
"dataType": "jsonp" 
},
"columnDefs": [
 {
 "className": "dt-right",
"targets":                 5 
} 
],
"order": [],
"serverSide": true 
},
"callback": "function(table) {}",
"colnames": [ "First name", "Last name", "Position", "Office", "Start date", "Salary" ] 
},"evals": [  ] }</script></p>
</div>
<div id="a-shiny-example-experimental" class="section level1">
<h1><span class="header-section-number">2</span> A Shiny Example (Experimental)</h1>
<p>If you have used <strong>DataTables</strong> in <strong>shiny</strong> before, you might know that <strong>shiny</strong> uses the server-side processing model for <strong>DataTables</strong>, which basically means the data is processed through R, and R will return the JSON data to the client. The key pieces that makes this work are two functions: <code>session$registerDataObj()</code>, and <code>shiny:::dataTablesJSON()</code>. The former registers a data object in the shiny session and returns a URL, which can be used as the server URL for <code>datatable()</code>; the latter was designed to process the data according to the Ajax request sent from <strong>DataTables</strong> and return JSON data. We can put these two pieces together and use them in a shiny app. There is an example in the <strong>DT</strong> package, which you can run by</p>
<pre class="sourceCode r"><code class="sourceCode r">shiny::<span class="kw">runApp</span>(<span class="kw">system.file</span>(<span class="st">&#39;examples&#39;</span>, <span class="st">&#39;DT-shiny&#39;</span>, <span class="dt">package =</span> <span class="st">&#39;DT&#39;</span>))</code></pre>
<p>Below is the source code of the example app:</p>
<div id="ui.r" class="section level2">
<h2><span class="header-section-number">2.1</span> ui.R</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)
if (<span class="kw">packageVersion</span>(<span class="st">&#39;shiny&#39;</span>) &lt;=<span class="st"> &#39;0.10.2.2&#39;</span>) <span class="kw">stop</span>(<span class="st">&#39;This app requires shiny &gt; 0.10.2.2&#39;</span>)

<span class="kw">shinyUI</span>(<span class="kw">fluidPage</span>(
  <span class="dt">title =</span> <span class="st">&#39;Use the DT package in shiny&#39;</span>,
  <span class="kw">fluidRow</span>(
    <span class="kw">column</span>(<span class="dv">2</span>),
    <span class="kw">column</span>(<span class="dv">8</span>, DT::<span class="kw">dataTableOutput</span>(<span class="st">&#39;tbl&#39;</span>)),
    <span class="kw">column</span>(<span class="dv">2</span>)
  )
))</code></pre>
</div>
<div id="server.r" class="section level2">
<h2><span class="header-section-number">2.2</span> server.R</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)
<span class="kw">library</span>(DT)

<span class="kw">shinyServer</span>(function(input, output, session) {
  action =<span class="st"> </span>session$<span class="kw">registerDataObj</span>(<span class="st">&#39;iris&#39;</span>, iris, shiny:::dataTablesJSON)
  widget =<span class="st"> </span><span class="kw">datatable</span>(iris, <span class="dt">server =</span> <span class="ot">TRUE</span>, <span class="dt">options =</span> <span class="kw">list</span>(
    <span class="dt">processing =</span> <span class="ot">TRUE</span>, <span class="dt">ajax =</span> <span class="kw">list</span>(
      <span class="dt">url =</span> action, <span class="dt">type =</span> <span class="st">&#39;POST&#39;</span>, <span class="dt">data =</span> <span class="kw">JS</span>(
        <span class="st">&#39;function(d) {&#39;</span>,
        <span class="st">&#39;d.search.caseInsensitive = false;&#39;</span>,
        <span class="st">&#39;d.escape = true;&#39;</span>,
        <span class="st">&#39;}&#39;</span>
      )
    )
  ))
  output$tbl =<span class="st"> </span>DT::<span class="kw">renderDataTable</span>(widget)
})</code></pre>
<p>That is more or less how <strong>DataTables</strong> has been working internally in <strong>shiny</strong>.</p>
<p>Please note this example is <em>experimental</em>, and may have many rough edges. You may not really need server-side processing at all: client-side DataTables may just suffice. Here is a minimal example of client-side DataTables:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)
<span class="kw">shinyApp</span>(
  <span class="dt">ui =</span> <span class="kw">fluidPage</span>(DT::<span class="kw">dataTableOutput</span>(<span class="st">&#39;tbl&#39;</span>)),
  <span class="dt">server =</span> function(input, output) {
    output$tbl =<span class="st"> </span>DT::<span class="kw">renderDataTable</span>({
      DT::<span class="kw">datatable</span>(iris)
    })
  }
)</code></pre>
</div>
</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
    // active menu
    var href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href === '') href = './';
    $('a[href="' + href + '"]').parent().addClass('active');
});
</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
